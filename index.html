<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Airport Cyber Crisis</title>
  <style>
    :root{--bg1:#0a1a2f;--bg2:#0e223b;--accent:#00e5ff;--ok:#00c27a;--err:#ff5c5c}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:20px;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#eaf7ff}

    #logo-container{
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px 0;
    }
    #stem_logo{
      max-width:40vw;
      height:auto;
      display:block;
    }

    .wrap{max-width:980px;margin:28px auto;padding:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 12px 40px rgba(0,0,0,0.6)}

    .choices{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .choice{
      background:#ffffff;
      color:#111;
      padding:12px;border-radius:10px;
      border:1px solid rgba(0,0,0,0.1);
      cursor:pointer;
      display:flex;align-items:center;gap:12px;
      transition:transform .12s ease,box-shadow .18s ease,background-color .18s ease,border-color .18s ease;
    }
    .choice:focus{outline:3px solid rgba(0,229,255,0.08)}
    .choice:hover{
      background:#fff8c4;
      transform:translateY(-3px);
    }
    .choice.correct{background:var(--ok);color:#fff;border-color:rgba(0,194,122,0.6);box-shadow:0 12px 30px rgba(0,194,122,0.3);transform:translateY(-6px)}
    .choice.wrong{background:var(--err);color:#fff;border-color:rgba(255,92,92,0.6);box-shadow:0 12px 30px rgba(255,92,92,0.3);transform:translateY(-6px)}
    .choice .letter{width:36px;height:36px;border-radius:8px;display:grid;place-items:center;font-weight:800;color:var(--accent);background:rgba(0,0,0,0.05)}

    .timer{font-family:monospace;background:rgba(0,0,0,0.12);padding:8px 12px;border-radius:8px}
    .kbd{background:#0b2238;border-radius:6px;padding:6px 8px;font-family:monospace}
    .leaderboard{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px}
    .btn{background:linear-gradient(90deg,var(--accent),#7b61ff);border:0;color:#021;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}
    input[type=text]{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.12);color:inherit}
    .audio-controls{margin-top:12px;display:flex;gap:10px;align-items:center}
    .audio-controls input[type=range]{width:140px}
    .mute-indicator{font-size:18px;margin-left:8px}
    footer{margin-top:12px;display:flex;justify-content:space-between}
    header{display:flex;gap:12px;align-items:center}
    .muted{opacity:0.7;font-size:0.9em}
  </style>
</head>
<body>
    <div id="logo-container">
        <img src="stem_logo.png" alt="STEM Logo" id="stem_logo">
    </div>  
    <div class="wrap">
    <div class="card">
      <header>
        <div style="display:flex;align-items:center;gap:12px;">
          <svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z" fill="var(--accent)"/>
          </svg>
        </div>
        <div>
          <h1>Airport Cyber Crisis</h1>
          <div class="muted">Cyber Incident Response Challenge ‚Äì 30 minutes, 20 questions</div>
        </div>
        <div style="margin-left:auto;text-align:right">
          <div class="timer" id="top-timer">‚è± 30:00</div>
          <div class="muted" id="top-score">Score: 0</div>
        </div>
      </header>
    </div>
    </div>
</body>
</html>

      <main style="margin-top:12px">
        <section id="screen-welcome">
          <div class="grid">
            <div>
              <h2 class="muted">Welcome</h2>
              <p>Enter your player name and press <span class="kbd">Start</span>. This run will use all 20 scenarios. Wrong answers cost <strong id="penalty-text">60s</strong>.</p>
              <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
                <input id="player-name" type="text" placeholder="Player name" />
                <button class="btn" id="btn-start">Start</button>
              </div>

              <div style="margin-top:12px" class="leaderboard">
                <strong>Top responders</strong>
                <ol id="leaderboard-list" style="padding-left:18px;margin-top:8px"></ol>
                <div style="margin-top:8px"><button id="clear-leaderboard" style="background:transparent;border:0;color:var(--muted);cursor:pointer">Clear</button></div>
              </div>

              <p class="muted" style="margin-top:10px">

              <div class="audio-controls" style="margin-top:14px">
                <label class="muted small">Volume <input id="volume-slider" type="range" min="0" max="1" step="0.05" value="1"></label>
                <button id="mute-toggle" class="btn">Mute</button>
                <span id="mute-indicator" class="mute-indicator" aria-hidden>üîä</span>
              </div>

            </div>

            <aside class="card" style="padding:12px">
              <strong>Game rules</strong>
              <ul class="muted" style="margin-top:8px">
                <li>20 questions per run, all shown in random order.</li>
                <li>Correct answer: +100 points + time bonus.</li>
                <li>Wrong answer: -60 seconds.</li>
              </ul>
            </aside>
          </div>
        </section>

        <section id="screen-game" style="display:none;margin-top:12px">
          <div class="grid">
            <div>
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                  <div class="muted">Question <span id="q-num">1</span> / <span id="q-total">20</span></div>
                  <h2 id="q-title"></h2>
                </div>
                <div style="width:220px">
                  <div style="height:10px;background:rgba(255,255,255,0.04);border-radius:8px;overflow:hidden"><i id="progress-bar" style="display:block;height:100%;background:linear-gradient(90deg,var(--accent),#ffde00);width:0%"></i></div>
                </div>
              </div>

              <div id="choices" class="choices" role="list"></div>
              <div id="feedback" style="margin-top:10px;min-height:24px"></div>
            </div>

            <aside class="card" style="padding:12px">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div><div class="muted">Responder</div><div id="display-name" style="font-weight:800"></div></div>
                <div style="text-align:center"><div class="muted small">Time</div><div id="display-timer" style="font-size:20px">30:00</div></div>
              </div>

              <div style="margin-top:10px"><div class="muted small">Score</div><div id="display-score" style="font-size:20px;font-weight:800">0</div></div>
              <div style="margin-top:10px"><button id="btn-end" class="btn">End Run</button></div>
            </aside>
          </div>
        </section>

        <section id="screen-end" style="display:none;margin-top:12px">
          <h2>Run Complete</h2>
          <p class="muted">You scored <strong id="final-score">0</strong> and answered <strong id="final-correct">0</strong> correct out of <span id="final-total">20</span>.</p>
          <div style="display:flex;gap:8px"><button id="btn-play-again" class="btn">Play Again</button><button id="btn-share" class="btn">Copy Share Text</button></div>
          <div style="margin-top:12px" class="leaderboard"><h3>Leaderboard ‚Äî Top</h3><ol id="leaderboard-final" style="padding-left:18px;margin-top:6px"></ol></div>
        </section>
      </main>

      <footer>
        
      </footer>
    </div>
  </div>

<script>
(function(){
  const TOTAL_TIME = 30*60;
  const PENALTY = 60;
  const POINTS_PER_CORRECT = 100;
  const STORAGE_KEY = 'airport_cyber_leaderboard_v2';
  const AUDIO_PREF_KEY = 'airport_cyber_audio_pref_v2';
  const QUESTIONS_PER_RUN = 20;

  // full pool of 20
  const QUESTION_POOL = [
    {title:'During an aircraft‚Äôs maintenance data upload via Wi-Fi, which encryption weakness could allow attackers to exfiltrate logs undetected?', choices:['WPA3 Dragonfly handshake','WPA2 PSK reuse','WPA Enterprise certificate pinning','802.1X mutual authentication'], correct:1},
    {title:'In aviation networks, which protocol is most at risk if an attacker performs a replay attack on ACARS messages between an aircraft and ground station?', choices:['TLS','SSL','VHF Data Link','SATCOM IP'], correct:2},
    {title:'What type of cyberattack could cause false altitude readings by compromising ADS-B transmissions?', choices:['Jamming','Spoofing','Man-in-the-middle','Replay attack'], correct:1},
    {title:'The use of unencrypted data buses within avionics systems presents which major cybersecurity risk?', choices:['Code injection','Data exfiltration','Message manipulation and spoofing','Cross-site scripting'], correct:2},
    {title:'Which is the most effective mitigation to prevent unauthorized access to an online airline pilot roster system?', choices:['Use same password for all systems','Allow SQL injection at login','Enable MFA for all users','Store plain text credentials'], correct:2},
    {title:'Which cybersecurity standard governs information security management systems relevant to aviation organizations?', choices:['ISO 27001','ETSI TR 104 128','NIST SP 800-53','DO-178C'], correct:0},
    {title:'Which of the following is a primary security challenge unique to multi-tenant cloud environments?', choices:['DDos attacks','Insecure APIs','Data leakage between tenants','Weak password policies'], correct:2},
    {title:'What cybersecurity vulnerability could arise if a maintenance technician uses an untrusted USB device to update Flight Management System software?', choices:['SQL injection','Firmware backdooring','Buffer overflow','Session hijacking'], correct:1},
    {title:'What type of cyber threat does Lateral Movement represent in the context of airline ground network breaches?', choices:['Malware spreading across aircraft','Attack propagation between systems post-compromise','DDoS attack against air traffic control systems','Exploit of GPS jamming vulnerabilities'], correct:1},
    {title:'In an airport‚Äôs cybersecurity monitoring center, what detection method best identifies insider threats manipulating air traffic databases?', choices:['Signature-based intrusion detection','Behavioral anomaly detection','Firewall ACL filtering','DNS sinkholing'], correct:1},
    {title:'In a cloud environment, which of the following is the most effective way to prevent unauthorized access to sensitive data stored in object storage?', choices:['Rely on default public access settings','Use encryption at rest only','Implement IAM policies with least privilege','Disable all access to the storage bucket'], correct:2},
    {title:'Which of the following attacks most effectively bypasses traditional signature-based intrusion detection systems (IDS)?', choices:['SYN flood attack','Polymorphic shellcode attack','ARP poisoning','Port scanning'], correct:1},
    {title:'If an attacker exploits an outdated Electronic Flight Bag (EFB) OS vulnerability, what primary security principle is violated?', choices:['Confidentiality','Availability','Non-repudiation','Integrity'], correct:3},
    {title:'In aviation cybersecurity, the Airline Operational Control (AOC) network is critical for:?', choices:['Passenger manifest handling','Aircraft dispatch and flight planning','In-flight entertainment','Baggage tracking'], correct:1},
    {title:'Which of the following represents a supply chain cyber risk unique to avionics development?', choices:['Unpatched aircraft routers','DDoS on radar systems','Tampered firmware from third-party vendors','Insider misuse of EFBs'], correct:2},
    {title:'Which of the following attacks specifically targets the integrity of an AI model by modifying its training data to cause incorrect outputs?', choices:['Evasion attack','Model inversion attack','Data poisoning attack','Adversarial example attack'], correct:2},
    {title:'Which cryptographic control is most suitable for securing aircraft-to-ground data links?', choices:['AES-256 in ECB mode','TLS with ephemeral keys','SHA-1 hashing','RSA-1024 static encryption'], correct:1},
    {title:'During flight operations, what is the most likely consequence of a successful denial-of-service attack on secondary radar systems?', choices:['Aircraft control restrictions','Loss of air traffic situational awareness','Staff credentials compromised','Data corruption in avionics'], correct:1},
    {title:'An attacker cloning a legitimate airport Wi-Fi SSID to capture pilot credentials is performing what?', choices:['Evil twin attack','Rogue AP DoS','ARP poisoning','Phishing'], correct:0},
    {title:'Which emerging aviation cybersecurity concern relates directly to unmanned air systems (UAS)?', choices:['Drone malware using C2 link','RemoteID location flooding','ADS-B spoofing of commercial airliners','Cabin network sniffing'], correct:1}
  ];

  let audioCtx=null, masterGain=null;
  let volume=1, muted=false;

  function ensureAudioContext(){
    if(audioCtx) return;
    try{audioCtx=new (window.AudioContext||window.webkitAudioContext)();
      masterGain=audioCtx.createGain();
      masterGain.gain.value=muted?0:volume;
      masterGain.connect(audioCtx.destination);
    }catch(e){audioCtx=null;}
  }
  function playTone(freq,duration){
    if(!audioCtx) return;
    const now=audioCtx.currentTime;
    const osc=audioCtx.createOscillator();
    const g=audioCtx.createGain();
    osc.type='sine';osc.frequency.value=freq;
    osc.connect(g);g.connect(masterGain);
    g.gain.setValueAtTime(0.001,now);
    g.gain.exponentialRampToValueAtTime(0.5,now+0.01);
    osc.start(now);
    g.gain.exponentialRampToValueAtTime(0.001,now+duration);
    osc.stop(now+duration+0.02);
  }
  function playCorrect(){ if(!muted) playTone(980,0.15); }
  function playWrong(){ if(!muted) playTone(260,0.2); }

  const $=id=>document.getElementById(id);
  function shuffle(a){const x=a.slice();for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[x[i],x[j]]=[x[j],x[i]];}return x;}

  let gameQuestions=[],timeLeft=TOTAL_TIME,timerId=null,qIndex=0,score=0,answers=[];

  function formatTime(s){const m=Math.floor(s/60).toString().padStart(2,'0');const ss=(s%60).toString().padStart(2,'0');return m+':'+ss;}
  function updateTimerUI(){$('top-timer').textContent='‚è± '+formatTime(timeLeft);$('display-timer').textContent=formatTime(timeLeft);}

  function renderQuestion(){
    $('q-total').textContent=gameQuestions.length;
    $('q-num').textContent=qIndex+1;
    const q=gameQuestions[qIndex];
    $('q-title').textContent=q.title;
    const choices=$('choices');choices.innerHTML='';
    q.choices.forEach((c,i)=>{
      const btn=document.createElement('button');btn.className='choice';btn.innerHTML=`<div class="letter">${String.fromCharCode(65+i)}</div><div style="flex:1;text-align:left">${c}</div>`;
      btn.onclick=()=>handleChoice(btn,i);choices.appendChild(btn);
    });
    $('progress-bar').style.width=Math.round((qIndex/gameQuestions.length)*100)+'%';
  }

  function handleChoice(btn,i){
    if(btn.disabled) return;
    const q=gameQuestions[qIndex];const correct=q.correct;
    const all=[...document.querySelectorAll('.choice')];
    all.forEach(b=>b.disabled=true);
    if(i===correct){
      btn.classList.add('correct');$('feedback').textContent='‚úÖ Correct';
      score+=POINTS_PER_CORRECT;playCorrect();
    }else{
      btn.classList.add('wrong');
      all[correct].classList.add('correct');
      $('feedback').textContent='‚ùå Wrong';
      timeLeft=Math.max(0,timeLeft-PENALTY);
      playWrong();
    }
    answers.push(i===correct);
    $('display-score').textContent=score;$('top-score').textContent='Score: '+score;
    setTimeout(()=>{qIndex++;if(qIndex<gameQuestions.length)renderQuestion();else endRun();},1200);
  }

  function tick(){timeLeft--;updateTimerUI();if(timeLeft<=0)endRun();}

  function startGame(){
    ensureAudioContext();if(audioCtx.state==='suspended')audioCtx.resume();
    const name=$('player-name').value.trim()||'Anon';
    $('display-name').textContent=name;
    gameQuestions=shuffle(QUESTION_POOL).slice(0,QUESTIONS_PER_RUN);
    timeLeft=TOTAL_TIME;score=0;answers=[];qIndex=0;updateTimerUI();
    $('display-score').textContent='0';$('top-score').textContent='Score: 0';
    $('screen-welcome').style.display='none';$('screen-game').style.display='block';$('screen-end').style.display='none';
    renderQuestion();clearInterval(timerId);timerId=setInterval(tick,1000);
  }

  function endRun(){
    clearInterval(timerId);
    $('screen-game').style.display='none';$('screen-end').style.display='block';
    $('final-score').textContent=score;$('final-correct').textContent=answers.filter(Boolean).length;$('final-total').textContent=gameQuestions.length;
    const name=$('display-name').textContent;const rec={name,score,date:Date.now()};
    const arr=JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');arr.push(rec);arr.sort((a,b)=>b.score-a.score);localStorage.setItem(STORAGE_KEY,JSON.stringify(arr.slice(0,10)));
    renderLeaderboard();
  }

  function renderLeaderboard(){
    const arr=JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');
    function fill(id){const el=$(id);el.innerHTML='';arr.forEach(r=>{const li=document.createElement('li');li.textContent=r.name+' ‚Äî '+r.score;el.appendChild(li);});}
    fill('leaderboard-list');fill('leaderboard-final');
  }

  $('btn-start').onclick=startGame;$('btn-end').onclick=endRun;$('btn-play-again').onclick=()=>{location.reload()};
  $('btn-share').onclick=()=>{navigator.clipboard.writeText(`I scored ${score} in Airport Cyber Crisis!`);alert('Copied share text!')};
  $('clear-leaderboard').onclick=()=>{localStorage.removeItem(STORAGE_KEY);renderLeaderboard();};
  renderLeaderboard();

  // audio controls
  const vol=$('volume-slider'),muteBtn=$('mute-toggle'),muteInd=$('mute-indicator');
  function applyAudioPref(){if(masterGain)masterGain.gain.value=muted?0:volume;vol.value=volume;muteBtn.textContent=muted?'Unmute':'Mute';muteInd.textContent=muted?'üîá':'üîä';localStorage.setItem(AUDIO_PREF_KEY,JSON.stringify({volume,muted}));}
  vol.oninput=()=>{volume=parseFloat(vol.value);if(volume<=0)muted=true;else muted=false;applyAudioPref();};
  muteBtn.onclick=()=>{muted=!muted;applyAudioPref();};
  const saved=JSON.parse(localStorage.getItem(AUDIO_PREF_KEY)||'null');if(saved){volume=saved.volume;muted=saved.muted;}applyAudioPref();

})();
</script>
</body>
</html>
