<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Airport Cyber Crisis</title>
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEUAAAD///////////////////////////////////////////////////////////9NTU3///////////////9DQ0P///////////////////////9hYWFpaWn///+ampq/v7/+/v7x8fHt7e3i4uLg4ODf39/8/Pzv7+/f39+jo6P////u7u6jo6P///9kZGRsbGzPz88lJSWhoc7Q0NAzMzP09PRtbW1lZWXf399BQUHt7e1HR0djY2OlpaXDw8MfHx+cnJyhoaHp6enV1dXHx8fw8PDj4+PZ2dl8fHzY2Njj4+O+vr7l5eX///9+fn6RkZGOjo6xsbH29vYhISHy8vLe3t7i4uLn5+eNjY37+/tVVVXZ2dlmZmbX19fCwsJwcHBbW1uFhYV7e3v09PT39/d0dHSvr6+Tk5Pl5eVLS0tvb2+ioqKAgIBKSkqZmZkhISESEhIKCgoAAAD1M+zpAAAAWXRSTlMAAwUIKjA2P0lNY3B/dXmVkZWiq7G9wcbKz9bh5+jr7vDx9vj6/f7/+D6iQHq5RTx8MYZyQxGeMcKnpOpo1oAfzvKw8nHUU7mwDnYB5r4/ETSYzV/A50L0dU2BiymEQuIAAAAtElEQVQY022Q51LCMBBFq3wFhVhhKK2t1QAgqKgq7d3u/39x6IEEeZe8mzk/G/wQkKS4hOJcZ8Sl+oVGFG+ZqVkpVr2uKqNKsoCwloNcqM5wDEPo7Ob6fMSnqppmxpK6mUyFYDNlHfdjjrZrKmI8T5GZJcwvDP5Voq1nDQMErtjhhbDQpxVttkRBosZVkeM1yiSoI0DN17w+x/EZhfnALZfxgDXldexxhAPNh2GXcg1XuwqDNm5Z8XNgYjsT+/kA3O7f3YQhePn3A7F3Yr9t/7ZJbBz3oAPkGiPHUNwQeChwfO5QwAYI3c7KkOfk98AAg4VjbiMI6OcAAAAASUVORK5CYII=" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: #fff;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #0a1a2f, #0e223b);
      background-attachment: fixed;
    }
    body::before {
      content: "";
      position: fixed;
      top:0; left:0; right:0; bottom:0;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><rect width="100%" height="100%" fill="url(%23grad)"/><defs><linearGradient id="grad" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="%230a1a2f" stop-opacity="0.9"/><stop offset="100%" stop-color="%230e223b" stop-opacity="0.9"/></linearGradient></defs><g fill="%23ffffff22"><path d="M100 500 l50 -150 50 150z"/><rect x="400" y="450" width="30" height="150"/><polygon points="415,400 440,450 390,450"/><polygon points="700,420 720,460 680,460"/></g><g fill="%23ffffff55"><polygon points="200,200 250,210 230,230"/><polygon points="600,150 650,160 620,180"/></g></svg>') no-repeat center center;
      background-size: cover;
      z-index: -1;
    }
    .wrap { max-width: 600px; width: 100%; padding: 20px; }
    .card {
      background: rgba(0,0,0,0.6);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0,0,0,0.6);
    }
    h1 { margin-top: 0; }
    .btn {
      background: #1e90ff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      margin: 5px 0;
    }
    .btn:hover { background: #63b3ff; }
    .choices button {
      display: block;
      width: 100%;
      margin: 5px 0;
    }
    .timer { font-size: 20px; margin-bottom: 10px; display:inline-block; }
    .hidden { display: none; }
    .leaderboard-entry { margin: 5px 0; }
    .audio-controls {margin-top:12px; display:flex; gap:10px; align-items:center}
    .audio-controls input[type=range]{width:120px}
    .mute-indicator {font-size:18px; margin-left:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Airport Cyber Crisis</h1>
      <div>
        <span id="timer" class="timer">30:00</span>
        <span id="mute-indicator" class="mute-indicator" aria-label="Mute status">ðŸ”Š</span>
      </div>

      <div id="start-screen">
        <p>Enter your name to begin:</p>
        <input id="player-name" type="text" placeholder="Your name" />
        <button id="start-btn" class="btn">Start</button>
      </div>

      <div id="game-screen" class="hidden">
        <h2 id="question-title"></h2>
        <div id="choices" class="choices"></div>
      </div>

      <div id="end-screen" class="hidden">
        <h2>Game Over</h2>
        <p id="final-score"></p>
        <h3>Leaderboard</h3>
        <div id="leaderboard"></div>
        <button id="restart-btn" class="btn">Play Again</button>
      </div>

      <!-- Audio controls -->
      <div class="audio-controls">
        <label>Volume 
          <input id="volume-slider" type="range" min="0" max="1" step="0.05" value="1">
        </label>
        <button id="mute-toggle" class="btn">Mute</button>
      </div>
    </div>
  </div>

<script>
(function(){
  const TOTAL_TIME = 30 * 60;
  const PENALTY = 60;
  const POINTS_PER_CORRECT = 100;
  const STORAGE_KEY = 'airport_cyber_leaderboard_v1';
  const AUDIO_PREF_KEY = 'airport_cyber_audio_pref';

  const SOUND_DING = "data:audio/wav;base64,UklGRpYAAABXQVZFZm10IBAAAAABAAEAIlYAAB9AAACABAAZGF0YVYAAAAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA//8AAP//AAD//wAA";
  const SOUND_WRONG = "data:audio/wav;base64,UklGRtIAAABXQVZFZm10IBAAAAABAAEAIlYAAB9AAACABAAZGF0YXYAAAAA//8AAP7/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA/n8AAP5/AAD+fwAA";

  const QUESTIONS = [
    {title:'A suspicious Wi-Fi network named "Airport_Guest_FREE" appears. What\'s your first action?', choices:['Block SSID and kick clients','Notify passengers','Disconnect staff devices','Scan with unauth tool'], correct:2},
    {title:'Spoofed payroll email received. What is priority?', choices:['Delete','Reset password','Quarantine and preserve headers','Publish to staff'], correct:2},
    {title:'Flight display screens defaced. Immediate step?', choices:['Reboot displays','Take offline and collect logs','Wait 24h','Call vendor only'], correct:1},
    {title:'Camera malware beaconing. Next?', choices:['Power off all','Isolate segment and capture traffic','Replace firmware','Ignore'], correct:1},
    {title:'Vendor locked out with ransom note. Next?', choices:['Pay ransom','Activate continuity, isolate infected','Shutdown airport','Blame vendor'], correct:1},
    {title:'Passenger data exfiltration. Highest priority?', choices:['Notify regulators','Identify/contain, preserve logs','Delete files','Ask passenger'], correct:1},
    {title:'Unknown USB auto-installs software. What do you do?', choices:['Wipe laptop','Isolate, image drive, investigate','Install AV quick scan','Ignore'], correct:1},
    {title:'Cloned badge detected. Best response?', choices:['Reissue all','Audit logs, remove clones, tighten checks','Close lounge','Disable readers'], correct:1},
    {title:'Exposed HVAC admin interface. Immediate action?', choices:['Contact vendor','Block public access, notify','Change settings','Exploit test'], correct:1},
    {title:'Phishing campaign at staff. How reduce impact?', choices:['Awareness + simulated campaign','Disable all email','Fire staff','Ignore'], correct:0}
  ];

  const el = id => document.getElementById(id);
  const volumeSlider = el('volume-slider');
  const muteToggle = el('mute-toggle');
  const muteIndicator = el('mute-indicator');

  let sounds = {};
  let muted = false;
  let volume = 1;
  let timeLeft = TOTAL_TIME;
  let timerInterval;
  let currentQuestion = 0;
  let score = 0;
  let playerName = '';

  function loadAudioPrefs(){
    try{ const stored=JSON.parse(localStorage.getItem(AUDIO_PREF_KEY)); if(stored){ volume=stored.volume; muted=stored.muted; } }catch(e){}
  }
  function saveAudioPrefs(){ try{ localStorage.setItem(AUDIO_PREF_KEY, JSON.stringify({volume, muted})); }catch(e){} }
  function preLoadSounds(){ sounds.correct=new Audio(SOUND_DING); sounds.wrong=new Audio(SOUND_WRONG); setVolume(volume); if(muted){ setVolume(0);} }
  function setVolume(vol){ sounds.correct.volume=vol; sounds.wrong.volume=vol; }
  function updateMuteUI(){ volumeSlider.value=muted?0:volume; muteToggle.textContent=muted?'Unmute':'Mute'; muteIndicator.textContent=muted?'ðŸ”‡':'ðŸ”Š'; }

  volumeSlider.addEventListener('input', e=>{ volume=parseFloat(e.target.value); muted=volume===0; if(!muted)setVolume(volume); updateMuteUI(); saveAudioPrefs(); });
  muteToggle.addEventListener('click', ()=>{ muted=!muted; if(muted){ setVolume(0); volumeSlider.value=0; } else { if(volume===0) volume=1; setVolume(volume); volumeSlider.value=volume; } updateMuteUI(); saveAudioPrefs(); });

  function startGame(){
    el('start-screen').classList.add('hidden'); el('game-screen').classList.remove('hidden');
    playerName=el('player-name').value||'Player'; score=0; currentQuestion=0; timeLeft=TOTAL_TIME;
    renderQuestion(); timerInterval=setInterval(()=>{ timeLeft--; updateTimer(); if(timeLeft<=0)endGame(); },1000);
  }
  function updateTimer(){ const m=Math.floor(timeLeft/60).toString().padStart(2,'0'); const s=(timeLeft%60).toString().padStart(2,'0'); el('timer').textContent=`${m}:${s}`; }
  function renderQuestion(){ if(currentQuestion>=QUESTIONS.length){endGame();return;} const q=QUESTIONS[currentQuestion]; el('question-title').textContent=q.title; const c=el('choices'); c.innerHTML=''; q.choices.forEach((t,i)=>{const b=document.createElement('button'); b.className='btn'; b.textContent=t; b.onclick=()=>onChoose(i===q.correct); c.appendChild(b);}); }
  function onChoose(correct){ if(correct){ score+=POINTS_PER_CORRECT; if(!muted){sounds.correct.currentTime=0; sounds.correct.play().catch(()=>{});} } else { timeLeft-=PENALTY; if(!muted){sounds.wrong.currentTime=0; sounds.wrong.play().catch(()=>{});} } currentQuestion++; renderQuestion(); }
  function endGame(){ clearInterval(timerInterval); el('game-screen').classList.add('hidden'); el('end-screen').classList.remove('hidden'); el('final-score').textContent=`${playerName}, your score: ${score}`; let board=[]; try{board=JSON.parse(localStorage.getItem(STORAGE_KEY))||[];}catch(e){} board.push({name:playerName,score}); board.sort((a,b)=>b.score-a.score); board=board.slice(0,10); localStorage.setItem(STORAGE_KEY,JSON.stringify(board)); const lb=el('leaderboard'); lb.innerHTML=''; board.forEach((e,i)=>{const d=document.createElement('div'); d.className='leaderboard-entry'; d.textContent=`${i+1}. ${e.name}: ${e.score}`; lb.appendChild(d);}); }
  function init(){ loadAudioPrefs(); preLoadSounds(); updateMuteUI(); el('start-btn').onclick=startGame; el('restart-btn').onclick=()=>location.reload(); updateTimer(); }
  init();
})();
</script>
</body>
</html>
